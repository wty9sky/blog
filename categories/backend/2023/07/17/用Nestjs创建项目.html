<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nestjså¿«é€Ÿä¸Šæ‰‹ | ä¹å¤©ã®çŸ¥è¯†ä»“åº“</title>
    <meta name="description" content="ä¸ªäººæŠ€æœ¯çŸ¥è¯†åº“ï¼Œè®°å½• & åˆ†äº«ä¸ªäººç¢ç‰‡åŒ–ã€ç»“æ„åŒ–ã€ä½“ç³»åŒ–çš„æŠ€æœ¯çŸ¥è¯†å†…å®¹ã€‚">
    <meta name="generator" content="VitePress v1.0.0-rc.40">
    <link rel="preload stylesheet" href="/assets/style.d1NJLEUG.css" as="style">
    
    <script type="module" src="/assets/app.WQllGRJe.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.x10tvMrD.js">
    <link rel="modulepreload" href="/assets/chunks/theme.oJp2QlCq.js">
    <link rel="modulepreload" href="/assets/chunks/ArticleMetadata.iqJwhQxk.js">
    <link rel="modulepreload" href="/assets/chunks/index.DkoCfqcs.js">
    <link rel="modulepreload" href="/assets/categories_backend_2023_07_17_ç”¨Nestjsåˆ›å»ºé¡¹ç›®.md.hpDVWHZH.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="author" content="I9SKY">
    <meta name="keywords" content="ä¹å¤©ã®çŸ¥è¯†ä»“åº“, çŸ¥è¯†åº“, åšå®¢, I9SKY,SWDIKI">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="theme-color" content="#3c8772">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:title" content="ä¹å¤©ã®çŸ¥è¯†ä»“åº“">
    <meta property="og:description" content="ä¸ªäººæŠ€æœ¯çŸ¥è¯†åº“ï¼Œè®°å½• &amp; åˆ†äº«ä¸ªäººç¢ç‰‡åŒ–ã€ç»“æ„åŒ–ã€ä½“ç³»åŒ–çš„æŠ€æœ¯çŸ¥è¯†å†…å®¹ã€‚">
    <meta property="og:site" content="https://wty9sky.github.io">
    <meta property="og:site_name" content="ä¹å¤©ã®çŸ¥è¯†ä»“åº“">
    <meta property="og:image" content="https://wty9sky.github.io/logo.jpg">
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?53af4b1a12fbe40810ca7ad39f8db9c7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d4b3629f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-e8984569></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-e8984569> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d4b3629f data-v-07098ee1><div class="VPNavBar has-sidebar" data-v-07098ee1 data-v-b9d745a4><div class="wrapper" data-v-b9d745a4><div class="container" data-v-b9d745a4><div class="title" data-v-b9d745a4><div class="VPNavBarTitle has-sidebar" data-v-b9d745a4 data-v-f0442d90><a class="title" href="/" data-v-f0442d90><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-ef153696><!--]--><!--[-->ä¹å¤©ã®çŸ¥è¯†ä»“åº“<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-b9d745a4><div class="content-body" data-v-b9d745a4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-b9d745a4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b9d745a4 data-v-da171d27><span id="main-nav-aria-label" class="visually-hidden" data-v-da171d27>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-da171d27 data-v-cd9cd2f5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cd9cd2f5><span class="text" data-v-cd9cd2f5><!----><span data-v-cd9cd2f5>æ–‡ç« </span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-cd9cd2f5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-cd9cd2f5><div class="VPMenu" data-v-cd9cd2f5 data-v-d180b4e6><div class="items" data-v-d180b4e6><!--[--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/categories/frontend/index" data-v-be4efb62><!--[-->å‰ç«¯<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link active" href="/categories/backend/index" data-v-be4efb62><!--[-->åç«¯<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-da171d27 data-v-cd9cd2f5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cd9cd2f5><span class="text" data-v-cd9cd2f5><!----><span data-v-cd9cd2f5>å¼€å‘æ—¥å¿—</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-cd9cd2f5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-cd9cd2f5><div class="VPMenu" data-v-cd9cd2f5 data-v-d180b4e6><div class="items" data-v-d180b4e6><!--[--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/develop/editor/index" data-v-be4efb62><!--[-->MDå¯Œæ–‡æœ¬ç¼–è¾‘å™¨<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-da171d27 data-v-cd9cd2f5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cd9cd2f5><span class="text" data-v-cd9cd2f5><!----><span data-v-cd9cd2f5>å­¦ä¹ ç¬”è®°</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-cd9cd2f5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-cd9cd2f5><div class="VPMenu" data-v-cd9cd2f5 data-v-d180b4e6><div class="items" data-v-d180b4e6><!--[--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/notes/react/index" data-v-be4efb62><!--[-->React<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/notes/rust/index" data-v-be4efb62><!--[-->Rust<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/notes/vue3/index" data-v-be4efb62><!--[-->Vue3<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/projects/index" tabindex="0" data-v-da171d27 data-v-fec48364><!--[--><span data-v-fec48364>é¡¹ç›®ä¹‹æ—…</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/resume" tabindex="0" data-v-da171d27 data-v-fec48364><!--[--><span data-v-fec48364>ç®€å†</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-da171d27 data-v-cd9cd2f5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cd9cd2f5><span class="text" data-v-cd9cd2f5><!----><span data-v-cd9cd2f5>å…³äº</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-cd9cd2f5><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-cd9cd2f5><div class="VPMenu" data-v-cd9cd2f5 data-v-d180b4e6><div class="items" data-v-d180b4e6><!--[--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/about/me" data-v-be4efb62><!--[-->å…³äºæˆ‘<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-d180b4e6 data-v-be4efb62><a class="VPLink link" href="/about/version" data-v-be4efb62><!--[-->ç‰ˆæœ¬å†ç¨‹<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-b9d745a4 data-v-c87c392d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-c87c392d data-v-01f1e9d7 data-v-dcbb1124><span class="check" data-v-dcbb1124><span class="icon" data-v-dcbb1124><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-01f1e9d7><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-01f1e9d7><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b9d745a4 data-v-012407d6 data-v-404151ee><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wty9sky/wty9sky.github.io" aria-label="github" target="_blank" rel="noopener" data-v-404151ee data-v-ab3d8c7b><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b9d745a4 data-v-d910e2ed data-v-cd9cd2f5><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cd9cd2f5><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-cd9cd2f5><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-cd9cd2f5><div class="VPMenu" data-v-cd9cd2f5 data-v-d180b4e6><!----><!--[--><!--[--><!----><div class="group" data-v-d910e2ed><div class="item appearance" data-v-d910e2ed><p class="label" data-v-d910e2ed>åˆ‡æ¢æ—¥å…‰/æš—é»‘æ¨¡å¼</p><div class="appearance-action" data-v-d910e2ed><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d910e2ed data-v-01f1e9d7 data-v-dcbb1124><span class="check" data-v-dcbb1124><span class="icon" data-v-dcbb1124><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-01f1e9d7><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-01f1e9d7><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-d910e2ed><div class="item social-links" data-v-d910e2ed><div class="VPSocialLinks social-links-list" data-v-d910e2ed data-v-404151ee><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wty9sky/wty9sky.github.io" aria-label="github" target="_blank" rel="noopener" data-v-404151ee data-v-ab3d8c7b><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b9d745a4 data-v-72d61fc9><span class="container" data-v-72d61fc9><span class="top" data-v-72d61fc9></span><span class="middle" data-v-72d61fc9></span><span class="bottom" data-v-72d61fc9></span></span></button></div></div></div></div><div class="divider" data-v-b9d745a4><div class="divider-line" data-v-b9d745a4></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d4b3629f data-v-7723840b><div class="container" data-v-7723840b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-7723840b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-7723840b><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-7723840b>æ–‡ç« </span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-7723840b data-v-c5dde924><button data-v-c5dde924>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-d4b3629f data-v-2da1dbb1><div class="curtain" data-v-2da1dbb1></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-2da1dbb1><span class="visually-hidden" id="sidebar-aria-label" data-v-2da1dbb1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-2da1dbb1><section class="VPSidebarItem level-0 collapsible has-active" data-v-2da1dbb1 data-v-7fbd0894><div class="item" role="button" tabindex="0" data-v-7fbd0894><div class="indicator" data-v-7fbd0894></div><h2 class="text" data-v-7fbd0894><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/rabbit.svg" title="å…”å¹´" alt="ç”Ÿè‚–">
            2023å¹´ (3ç¯‡)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7fbd0894><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-7fbd0894><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-7fbd0894><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7fbd0894 data-v-7fbd0894><div class="item" data-v-7fbd0894><div class="indicator" data-v-7fbd0894></div><a class="VPLink link link" href="/categories/backend/2023/10/22/%E5%89%8D%E7%AB%AF%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E6%96%B9%E6%A1%88%E6%8E%A2%E7%B4%A2" data-v-7fbd0894><!--[--><p class="text" data-v-7fbd0894><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>å‰ç«¯å³æ—¶é€šè®¯æ–¹æ¡ˆæ¢ç´¢</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7fbd0894 data-v-7fbd0894><div class="item" data-v-7fbd0894><div class="indicator" data-v-7fbd0894></div><a class="VPLink link link" href="/categories/backend/2023/07/17/%E7%94%A8Nestjs%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE" data-v-7fbd0894><!--[--><p class="text" data-v-7fbd0894><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>Nestjså¿«é€Ÿä¸Šæ‰‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7fbd0894 data-v-7fbd0894><div class="item" data-v-7fbd0894><div class="indicator" data-v-7fbd0894></div><a class="VPLink link link" href="/categories/backend/2023/02/21/koa%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90" data-v-7fbd0894><!--[--><p class="text" data-v-7fbd0894><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>Koaæºç åˆ†æ&æ‰‹å†™Koa</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-2da1dbb1><section class="VPSidebarItem level-0 collapsible collapsed" data-v-2da1dbb1 data-v-7fbd0894><div class="item" role="button" tabindex="0" data-v-7fbd0894><div class="indicator" data-v-7fbd0894></div><h2 class="text" data-v-7fbd0894><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/rat.svg" title="é¼ å¹´" alt="ç”Ÿè‚–">
            2020å¹´ (1ç¯‡)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7fbd0894><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-7fbd0894><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-7fbd0894><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7fbd0894 data-v-7fbd0894><div class="item" data-v-7fbd0894><div class="indicator" data-v-7fbd0894></div><a class="VPLink link link" href="/categories/backend/2020/12/05/%E5%85%AC%E4%BC%97%E5%8F%B7%E5%AE%9A%E6%97%B6%E5%8F%91%E9%80%81%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF%E7%9A%84%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%B4%A2" data-v-7fbd0894><!--[--><p class="text" data-v-7fbd0894><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>å…¬ä¼—å·å®šæ—¶å‘é€æ¨¡æ¿æ¶ˆæ¯çš„æŠ€æœ¯æ¢ç´¢</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d4b3629f data-v-18e72b1e><div class="VPDoc has-sidebar has-aside" data-v-18e72b1e data-v-04776be3><!--[--><!--]--><div class="container" data-v-04776be3><div class="aside" data-v-04776be3><div class="aside-curtain" data-v-04776be3></div><div class="aside-container" data-v-04776be3><div class="aside-content" data-v-04776be3><div class="VPDocAside" data-v-04776be3 data-v-a6eb54bd><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-a6eb54bd data-v-638cb370><div class="content" data-v-638cb370><div class="outline-marker" data-v-638cb370></div><div class="outline-title" role="heading" aria-level="2" data-v-638cb370>ç›®å½•</div><nav aria-labelledby="doc-outline-aria-label" data-v-638cb370><span class="visually-hidden" id="doc-outline-aria-label" data-v-638cb370> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-638cb370 data-v-7397c01e><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-a6eb54bd></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-04776be3><div class="content-container" data-v-04776be3><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><main class="main" data-v-04776be3><div style="position:relative;" class="vp-doc _categories_backend_2023_07_17_%E7%94%A8Nestjs%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE" data-v-04776be3><div><h1 id="nestjs-å¿«é€Ÿä¸Šæ‰‹" tabindex="-1">Nestjs å¿«é€Ÿä¸Šæ‰‹ <a class="header-anchor" href="#nestjs-å¿«é€Ÿä¸Šæ‰‹" aria-label="Permalink to &quot;Nestjs å¿«é€Ÿä¸Šæ‰‹&quot;">â€‹</a></h1><!----><p><strong>NestJS</strong> æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„ <strong>Node.js</strong> æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒé‡‡ç”¨äº†æ¸è¿›å¼ <strong>JavaScript</strong> ï¼Œä½¿ç”¨ <strong>TypeScript</strong> æ„å»ºå¹¶å®Œå…¨æ”¯æŒ <strong>TypeScript</strong>ï¼ˆä½†ä»å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨çº¯<strong>JavaScript</strong> ç¼–ç ï¼‰ï¼Œå¹¶ç»“åˆäº†<strong>OOP</strong>ï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰ã€<strong>FP</strong>ï¼ˆé¢å‘å‡½æ•°ç¼–ç¨‹ï¼‰å’Œ <strong>FRP</strong>ï¼ˆé¢å‘å‡½æ•°çš„å“åº”å¼ç¼–ç¨‹ï¼‰çš„å…ƒç´ ã€‚</p><h2 id="å¿«é€Ÿåˆ›å»ºé¡¹ç›®" tabindex="-1">å¿«é€Ÿåˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#å¿«é€Ÿåˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;å¿«é€Ÿåˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h2><p>å…¨å±€å®‰è£…è„šæ‰‹æ¶å¹¶å¯ç”¨ä¸¥æ ¼æ¨¡å¼åˆ›å»ºé¡¹ç›®ï¼›</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## å…¨å±€å®‰è£…è„šæ‰‹æ¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">npm i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">g @nestjs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">cli</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## å¯ç”¨ Typescript ä¸¥æ ¼æ¨¡å¼åˆ›å»ºé¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">nest new project </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">strict</span></span></code></pre></div><h2 id="ç†Ÿæ‚‰å…³é”®æ–‡ä»¶" tabindex="-1">ç†Ÿæ‚‰å…³é”®æ–‡ä»¶ <a class="header-anchor" href="#ç†Ÿæ‚‰å…³é”®æ–‡ä»¶" aria-label="Permalink to &quot;ç†Ÿæ‚‰å…³é”®æ–‡ä»¶&quot;">â€‹</a></h2><p><code>src</code>ç›®å½•æ˜¯ä¸»è¦çš„æºç ç›®å½•ï¼Œä¸»è¦ç”±å…¥å£æ–‡ä»¶ <code>main.ts</code> å’Œ ä¸€ç»„ <code>module</code>ï¼Œ<code>service</code>ï¼Œ<code>controller</code>æ„æˆã€‚</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>project</span></span>
<span class="line"><span>â”œâ”€ src</span></span>
<span class="line"><span>â”‚  â”œâ”€ app.controller.ts		     # ä¸šåŠ¡æ•°æ®äº¤äº’çš„å…¥å£ï¼Œå®ç°æ•°æ®åœ¨å‰åç«¯çš„äº¤äº’</span></span>
<span class="line"><span>â”‚  â”œâ”€ app.service.ts           # å°è£…ä¸šåŠ¡é€»è¾‘ï¼Œå°†é‡å¤çš„ä¸šåŠ¡é€»è¾‘åœ¨æœåŠ¡å±‚è¿›è¡Œå°è£…</span></span>
<span class="line"><span>â”‚  â”œâ”€ app.module.ts            # è´Ÿè´£æ¨¡å—çš„ç®¡ç†ï¼Œé€šå¸¸ app.module è´Ÿè´£å…¨å±€æ¨¡å—çš„ç®¡ç†</span></span>
<span class="line"><span>â”‚  â””â”€ main.ts                  # å…¥å£æ–‡ä»¶ï¼Œåˆ›å»ºåº”ç”¨å®ä¾‹</span></span>
<span class="line"><span>â”œâ”€ README.md</span></span>
<span class="line"><span>â”œâ”€ nest-cli.json</span></span>
<span class="line"><span>â”œâ”€ package.json</span></span>
<span class="line"><span>â”œâ”€ tsconfig.build.json</span></span>
<span class="line"><span>â””â”€ tsconfig.json</span></span></code></pre></div><h2 id="è¿è¡Œåº”ç”¨ç¨‹åº" tabindex="-1">è¿è¡Œåº”ç”¨ç¨‹åº <a class="header-anchor" href="#è¿è¡Œåº”ç”¨ç¨‹åº" aria-label="Permalink to &quot;è¿è¡Œåº”ç”¨ç¨‹åº&quot;">â€‹</a></h2><ol><li>æ™®é€šå¯åŠ¨æ¨¡å¼ï¼š<code>npm run start</code></li><li>ç›‘å¬å¯åŠ¨æ¨¡å¼ï¼š<code>npm run start:dev</code></li><li>è°ƒè¯•å¯åŠ¨æ¨¡å¼ï¼š<code>npm run start:debug</code></li></ol><h2 id="ä»æ¨¡å—ç®¡ç†å¼€å§‹" tabindex="-1">ä»æ¨¡å—ç®¡ç†å¼€å§‹ <a class="header-anchor" href="#ä»æ¨¡å—ç®¡ç†å¼€å§‹" aria-label="Permalink to &quot;ä»æ¨¡å—ç®¡ç†å¼€å§‹&quot;">â€‹</a></h2><p><strong>Nestjs</strong> æ˜¯å…¸å‹çš„é‡‡ç”¨æ¨¡å—åŒ–ç»„ç»‡åº”ç”¨ç»“æ„çš„æ¡†æ¶ï¼Œé€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªåº”ç”¨ç”±ä¸€ä¸ªæ ¹æ¨¡å—(<strong>Application Module</strong>)å’Œå¤šä¸ªåŠŸèƒ½æ¨¡å—å…±åŒç»„æˆã€‚</p><h3 id="åˆ›å»ºæ¨¡å—" tabindex="-1">åˆ›å»ºæ¨¡å—ï¼š <a class="header-anchor" href="#åˆ›å»ºæ¨¡å—" aria-label="Permalink to &quot;åˆ›å»ºæ¨¡å—ï¼š&quot;">â€‹</a></h3><ul><li>å®Œæ•´å‘½ä»¤ï¼š<code>nest generate module &lt;module-name&gt;</code></li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g mo &lt;module-name&gt;</code></li></ul><p>æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªç”±<code>@Module()</code>è£…é¥°å™¨æ³¨é‡Šçš„ç±»ï¼Œåº”ç”¨ä¸­æ¨¡å—é—´çš„å…³ç³»å°†ç”±<code>@Module()</code>è£…é¥°å™¨ä¸­æºå¸¦çš„æ‰€æœ‰å…ƒæ•°æ®æè¿°ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Module } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  providers: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  imports: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  controllers: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  exports: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><h3 id="module-å…ƒæ•°æ®" tabindex="-1">@Module() å…ƒæ•°æ® <a class="header-anchor" href="#module-å…ƒæ•°æ®" aria-label="Permalink to &quot;@Module() å…ƒæ•°æ®&quot;">â€‹</a></h3><p>é€šè¿‡ <strong>Orders</strong> æ¨¡å—äº†è§£<code>@Module()</code>å…ƒæ•°æ®å¦‚ä½•ç»„ç»‡æ¨¡å—ï¼š</p><p>/tab</p><table><thead><tr><th>providers</th><th>æ³¨å†Œè®¢å•æä¾›è€…æ¨¡å—ï¼Œå¦‚ï¼šè´Ÿè´£è®¢å• CRUD çš„æœåŠ¡ï¼›</th></tr></thead><tbody><tr><td>controllers</td><td>æ³¨å†Œè®¢å•æ§åˆ¶å™¨æ¨¡å—ï¼Œå¦‚ï¼šè´Ÿè´£è®¢å• CRUD çš„è·¯ç”±å¤„ç†ï¼›</td></tr><tr><td>imports</td><td>æ³¨å†Œä¸è®¢å•ç›¸å…³è”çš„æ¨¡å—ï¼Œå¦‚ï¼šä¸è®¢å•å…³è”çš„ç”¨æˆ·æŸ¥è¯¢æœåŠ¡ï¼›</td></tr><tr><td>exports</td><td>å¯¼å‡ºè®¢å•æä¾›è€…æ¨¡å—ï¼Œå¦‚ï¼šç”¨æˆ·æŸ¥è¯¢éœ€è¦è®¢å•æä¾›è€…ç»Ÿè®¡è®¢å•æ•°é‡ï¼›</td></tr></tbody></table><p>ğŸ’¡ PSï¼š<strong>Orders</strong> æ¨¡å—é€šè¿‡<code>exports</code>å°†è®¢å•æä¾›è€…æ¨¡å—å¯¼å‡ºçš„è¡Œä¸ºç§°ä¸º<strong>æ¨¡å—å…±äº«</strong>ï¼›</p><h3 id="æ¨¡å—å†å¯¼å‡º" tabindex="-1">æ¨¡å—å†å¯¼å‡º <a class="header-anchor" href="#æ¨¡å—å†å¯¼å‡º" aria-label="Permalink to &quot;æ¨¡å—å†å¯¼å‡º&quot;">â€‹</a></h3><p>ä¸€ä¸ªæ¨¡å—ä»…è´Ÿè´£å°†ä¸€ç³»åˆ—ç›¸å…³è”çš„æ¨¡å—é€šè¿‡<code>imports</code>å¯¼å…¥ï¼Œç´§æ¥ç€å°±é€šè¿‡<code>exports</code>å…¨éƒ¨å¯¼å‡ºçš„è¡Œä¸ºå°±æ˜¯æ¨¡å—åœ¨å¯¼å‡ºï¼Œåˆ©ç”¨<strong>æ¨¡å—å†å¯¼å‡º</strong>çš„èƒ½åŠ›ï¼Œå¯ä»¥å‡å°‘å¤§é‡å…³è”æ¨¡å—é‡å¤å¯¼å…¥é€ æˆçš„è´Ÿæ‹…ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  imports: [DatabaseModule, RedisModule, MongoModule],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  exports: [DatabaseModule, RedisModule, MongoModule],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ConnectionModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><p>ğŸ’¡ PSï¼šåœ¨éœ€è¦åŒæ—¶ä½¿ç”¨æ•°æ®åº“è¿æ¥ã€Redis è¿æ¥ã€Mongo è¿æ¥çš„æƒ…å†µä¸‹ä»…éœ€è¦å¯¼ <strong>ConnectionModule</strong> æ¨¡å—å³å¯ã€‚</p><h3 id="å…¨å±€æ¨¡å—" tabindex="-1">å…¨å±€æ¨¡å— <a class="header-anchor" href="#å…¨å±€æ¨¡å—" aria-label="Permalink to &quot;å…¨å±€æ¨¡å—&quot;">â€‹</a></h3><p>å¦‚æœéœ€è¦ <strong>ConnectionModule</strong> æ¨¡å—åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½å¼€ç®±å³ç”¨ï¼Œé‚£å¯ä»¥ä¸ºå…¶å¢åŠ  <code>@Global()</code> è£…é¥°å™¨ï¼›</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Global</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  imports: [DatabaseModule, RedisModule, MongoModule],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  exports: [DatabaseModule, RedisModule, MongoModule],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ConnectionModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><h2 id="æ§åˆ¶å™¨çš„ä½¿ç”¨" tabindex="-1">æ§åˆ¶å™¨çš„ä½¿ç”¨ <a class="header-anchor" href="#æ§åˆ¶å™¨çš„ä½¿ç”¨" aria-label="Permalink to &quot;æ§åˆ¶å™¨çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>æ§åˆ¶å™¨ç”¨æ¥æ¥æ”¶å’Œå¤„ç†å®¢æˆ·ç«¯å‘èµ·çš„ç‰¹å®šè¯·æ±‚ï¼Œä¸åŒçš„å®¢æˆ·ç«¯è¯·æ±‚å°†ç”± <strong>Nestjs</strong> è·¯ç”±æœºåˆ¶åˆ†é…åˆ°å¯¹åº”çš„æ§åˆ¶å™¨è¿›è¡Œå¤„ç†ã€‚</p><h3 id="åˆ›å»ºæ§åˆ¶å™¨" tabindex="-1">åˆ›å»ºæ§åˆ¶å™¨ <a class="header-anchor" href="#åˆ›å»ºæ§åˆ¶å™¨" aria-label="Permalink to &quot;åˆ›å»ºæ§åˆ¶å™¨&quot;">â€‹</a></h3><ul><li>å®Œæ•´å‘½ä»¤ï¼š<code>nest generate controller &lt;controller-name&gt;</code></li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g co &lt;controller-name&gt;</code></li></ul><p>æ§åˆ¶å™¨æ˜¯ä½¿ç”¨<code>@Controller(â€™pathâ€™)</code>è£…é¥°å™¨æ³¨é‡Šçš„ç±»ï¼Œå…¶ä¸­<code>path</code>æ˜¯ä¸€ä¸ªå¯é€‰çš„è·¯ç”±è·¯å¾„å‰ç¼€ï¼Œé€šè¿‡<code>path</code>å¯ä»¥å°†ç›¸å…³çš„è·¯ç”±è¿›è¡Œåˆ†ç»„ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Controller, Get } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  index</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;This is the order controller&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ å°ç»“ï¼š</p><ol><li>å½“å®¢æˆ·ç«¯é€šè¿‡ <strong>GET</strong> æ–¹æ³•å¯¹ <code>orders</code> è·¯ç”±å‘é€è¯·æ±‚æ—¶å°†ç”± <code>index()</code> å¤„ç†å‡½æ•°å“åº”ã€‚</li><li>é™¤<code>@Get()</code>è£…é¥°å™¨å¤–ï¼Œ<strong>Nestjs</strong> è¿˜ä¸º <strong>HTTP</strong> æ ‡å‡†æ–¹æ³•æä¾›çš„è£…é¥°æœ‰<code>@Post()</code>ã€<code>@Put()</code>ã€<code>@Delete()</code>ã€<code>@Patch()</code>ã€<code>@Options()</code>å’Œ<code>@Head()</code>ï¼Œä»¥åŠ<code>@All()</code>ç”¨æ¥å¤„ç†æ‰€æœ‰çš„æƒ…å†µã€‚</li><li><code>@Controller(â€™pathâ€™)</code>ä¸­çš„ <code>path</code> ä»è®¾è®¡ä¸Šè™½ä¸ºå¯é€‰å‚æ•°ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­æœªé¿å…æ··ä¹±ä¼šåœ¨åˆ›å»ºæ§åˆ¶å™¨åä¼˜å…ˆåˆ†é… <code>path</code>ã€‚</li></ol><h3 id="è¯»å–è¯·æ±‚å¯¹è±¡" tabindex="-1">è¯»å–è¯·æ±‚å¯¹è±¡ <a class="header-anchor" href="#è¯»å–è¯·æ±‚å¯¹è±¡" aria-label="Permalink to &quot;è¯»å–è¯·æ±‚å¯¹è±¡&quot;">â€‹</a></h3><p>è¯·æ±‚å¯¹è±¡è¡¨ç¤ºä¸€ä¸ª <strong>HTTP</strong> è¯·æ±‚æ‰€æºå¸¦çš„æ•°æ®ä¿¡æ¯ï¼Œå¦‚è¯·æ±‚æ•°æ®ä¸­çš„æŸ¥è¯¢å‚æ•°ã€è·¯ç”±å‚æ•°ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰æ•°æ®ã€‚é€šè¿‡åœ¨ <strong>OrdersController</strong> æ§åˆ¶å™¨ä¸­ç¼–å†™æ›´å¤šçš„å¤„ç†æ–¹æ³•æ¥æ¼”ç¤ºæ¥æ”¶ä¸åŒçš„ <strong>HTTP</strong> æ–¹æ³•å’Œä¸åŒä½ç½®çš„å‚æ•°ï¼š</p><ol><li>é€šè¿‡ <strong>GET</strong> æ–¹æ³•è·å–è®¢å•åˆ—è¡¨æ•°æ®ï¼Œå¹¶é€šè¿‡<strong>æŸ¥è¯¢å‚æ•°</strong>ä¼ é€’è®¢å•åˆ†é¡µæ•°æ®ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;list&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;page&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) page: number, @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;limit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) limit: number) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `è·å–ç¬¬${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">page</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}é¡µï¼Œæ¯é¡µ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">limit</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}æ¡è®¢å•`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">curl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">request GET \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">url </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;http://localhost:3000/orders/list?page=1&amp;limit=20&#39;</span></span></code></pre></div><ol><li>é€šè¿‡ <strong>GET</strong> æ–¹æ³•æŸ¥è¯¢æŒ‡å®š ID çš„è®¢å•è¯¦æƒ…ï¼Œå¹¶é€šè¿‡<strong>è·¯ç”±å‚æ•°</strong>ä¼ é€’è®¢å• IDï¼›</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;detail/:id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findById</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() param: { id: number }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `è·å– ID ä¸º ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">param</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} çš„è®¢å•è¯¦æƒ…`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">curl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">request GET \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">url http:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">localhost:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">orders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">detail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span></span></code></pre></div><ol><li>é€šè¿‡ <strong>PATCH</strong> æ–¹æ³•æ›´æ–°æŒ‡å®š ID è®¢å•çš„æœ€æ–°çŠ¶æ€ï¼Œå¹¶é€šè¿‡è·¯ç”±å‚æ•°ä¼ é€’è®¢å• ID åŠæœ€æ–°çŠ¶æ€ï¼›</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Patch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;:id/:status&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">updateByIdAndStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) id: number,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;status&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) status: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `å°† ID ä¸º ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} è®¢å•çŠ¶æ€æ›´æ–°ä¸º ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">status</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">curl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">request PATCH \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">url </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;http://localhost:3000/orders/1/å·²é€€æ¬¾&#39;</span></span></code></pre></div><ol><li>é€šè¿‡ <strong>POST</strong> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è®¢å•ï¼Œå¹¶é€šè¿‡è¯·æ±‚ä½“ <strong>Body</strong> æ¥æ”¶è®¢å•æ•°æ®ï¼›</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ICreateOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">  article</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">  price</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">  count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">  source</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() order: ICreateOrder) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `åˆ›å»ºè®¢å•ï¼Œè®¢å•ä¿¡æ¯ä¸º ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">order</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">curl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">request POST \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">url http:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">//</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">localhost:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">orders \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">header </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;content-type: application/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  --</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">data </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	&quot;article&quot;: &quot;HUAWEI-Meta60&quot;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	&quot;price&quot;: 5999,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	&quot;count&quot;: 1,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">	&quot;source&quot;: &quot;Made in China&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}&#39;</span></span></code></pre></div><p>ğŸ’¡ å°ç»“ï¼š</p><ol><li>æ§åˆ¶å™¨ä¸­ä¸åŒçš„å¤„ç†å‡½æ•°å¯ä»¥é€šè¿‡ <strong>HTTP</strong> æ–¹æ³•æ¥åŒºåˆ†ï¼›</li><li>å½“å¤šä¸ªå¤„ç†å‡½æ•°éœ€è¦ä½¿ç”¨ç›¸åŒçš„ <strong>HTTP</strong> æ–¹æ³•æ—¶éœ€è¦æ·»åŠ å¤„ç†å‡½æ•°çº§åˆ«çš„è·¯ç”±ä»¥ç¤ºåŒºåˆ†ï¼›</li><li><code>@Param()</code>æœªæŒ‡å®šå‚æ•°æ—¶è¡¨ç¤ºæ‰€æœ‰è·¯ç”±å‚æ•°çš„é›†åˆï¼ŒæŒ‡å®šå‚æ•°æ—¶è¡¨ç¤ºå¯¹åº”æŒ‡å®šçš„å‚æ•°ï¼Œ<code>@Query()</code>ä¸<code>@Param()</code>å…·æœ‰ç›¸åŒçš„ç‰¹ç‚¹ã€‚</li></ol><h3 id="æ›´å¤šè£…é¥°å™¨" tabindex="-1">æ›´å¤šè£…é¥°å™¨ <a class="header-anchor" href="#æ›´å¤šè£…é¥°å™¨" aria-label="Permalink to &quot;æ›´å¤šè£…é¥°å™¨&quot;">â€‹</a></h3><ol><li>@Header(key, value)ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Header</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Cache-Control&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;none&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() createOrderDto: CreateOrderDto) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(createOrderDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ol><li>@Redirect(res, statusCode)</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;:id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;https://nestjs.com/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">301</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) id: string) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ å°ç»“ï¼š</p><ol><li>301ï¼šèµ„æºè¢«æ°¸ä¹…é‡å®šå‘åˆ°æ–°çš„èµ„æºï¼Œå®¢æˆ·ç«¯éœ€è¦è€ƒè™‘åŒæ­¥æ›´æ–°ï¼›</li><li>302ï¼šèµ„æºè¢«ä¸´æ—¶é‡å®šå‘åˆ°æ–°çš„èµ„æºï¼Œå¦‚ï¼šæœåŠ¡ç«¯å‡çº§æ—¶ä¼šå¯ç”¨ä¸´æ—¶èµ„æºï¼›</li></ol><p>ä¸‹é¢åˆ—å‡ºçš„å†…ç½®è£…é¥°å™¨å¯ç®€åŒ–è¯·æ±‚æ•°æ®ä¿¡æ¯çš„è¯»å–ï¼š</p><table><thead><tr><th>@Request(), @Req()</th><th>req</th></tr></thead><tbody><tr><td>@Response(), @Res()*</td><td>res</td></tr><tr><td>@Next()</td><td>next</td></tr><tr><td>@Session()</td><td>req.session</td></tr><tr><td>@Param(key?: string)</td><td>req.params / req.params[key]</td></tr><tr><td>@Body(key?: string)</td><td>req.body / req.body[key]</td></tr><tr><td>@Query(key?: string)</td><td>req.query / req.query[key]</td></tr><tr><td>@Headers(name?: string)</td><td>req.headers / req.headers[name]</td></tr><tr><td>@Ip()</td><td>req.ip</td></tr><tr><td>@HostParam()</td><td>req.hosts</td></tr></tbody></table><h2 id="æä¾›è€…çš„ä½¿ç”¨" tabindex="-1">æä¾›è€…çš„ä½¿ç”¨ <a class="header-anchor" href="#æä¾›è€…çš„ä½¿ç”¨" aria-label="Permalink to &quot;æä¾›è€…çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>åœ¨ Nestjs ä¸­å°†æä¾›æœåŠ¡çš„ç±»åŠä¸€äº›å·¥å‚ç±»ã€åŠ©æ‰‹ç±»ç­‰ç§°ä½œæä¾›è€…ï¼Œå®ƒä»¬åŒæ—¶å‡å¯ä»¥é€šè¿‡æ³¨å…¥çš„æ–¹å¼ä½œä¸ºä¾èµ–æ¨¡å—ï¼›</p><h3 id="åˆ›å»ºæœåŠ¡" tabindex="-1">åˆ›å»ºæœåŠ¡ <a class="header-anchor" href="#åˆ›å»ºæœåŠ¡" aria-label="Permalink to &quot;åˆ›å»ºæœåŠ¡&quot;">â€‹</a></h3><ul><li>å®Œæ•´å‘½ä»¤ï¼š<code>nest generate service orders</code>ï¼›</li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g s orders</code>ï¼›</li></ul><p>æœåŠ¡æ˜¯å…¸å‹çš„æä¾›è€…ï¼ŒHTTP è¯·æ±‚åœ¨ç»è¿‡æ§åˆ¶å™¨å¤„ç†ååº”è¯¥å°†å¤æ‚çš„ä»»åŠ¡äº¤ç”±æœåŠ¡å±‚è¿›è¡Œå¤„ç†ï¼Œå¦‚ï¼šå°†å¤æ‚çš„è®¢å•ç”Ÿæˆã€æŸ¥è¯¢ã€æ›´æ–°åŠåˆ é™¤ç­‰æ“ä½œè¿›è¡Œå°è£…ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Injectable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { CreateOrderDto } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./dto/create-order.dto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { UpdateOrderDto } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./dto/update-order.dto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersService</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">createOrderDto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CreateOrderDto</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;This action adds a new order&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `This action returns all orders`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `This action returns a #${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} order`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">updateOrderDto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> UpdateOrderDto</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `This action updates a #${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} order`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  remove</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> `This action removes a #${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} order`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ PSï¼š<strong>Nestjs</strong> åº”ç”¨å¯åŠ¨æ—¶å¿…é¡»è§£æå…¨éƒ¨ä¾èµ–ï¼Œå› æ­¤æ¯ä¸ªæä¾›è€…éƒ½å°†å®ä¾‹åŒ–å®Œæˆï¼ŒåŒæ—¶åœ¨åº”ç”¨åœæ­¢åæ¯ä¸ªæä¾›è€…å°†å…¨éƒ¨è¢«é”€æ¯ï¼Œæ‰€ä»¥é»˜è®¤çš„æä¾›è€…ç”Ÿå‘½å‘¨æœŸåŒåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><h3 id="æ³¨å…¥å¹¶ä½¿ç”¨" tabindex="-1">æ³¨å…¥å¹¶ä½¿ç”¨ <a class="header-anchor" href="#æ³¨å…¥å¹¶ä½¿ç”¨" aria-label="Permalink to &quot;æ³¨å…¥å¹¶ä½¿ç”¨&quot;">â€‹</a></h3><p>å°† <strong>OrdersService</strong> é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥åˆ° <strong>OrdersController</strong> æ§åˆ¶å™¨ï¼Œè¿™æ ·å°±å¾—åˆ°äº†åˆå§‹åŒ–åçš„ <strong>ordersService</strong> æˆå‘˜ï¼Œæ¥ç€å°±å¯ä»¥åœ¨ä¸åŒçš„å¤„ç†å‡½æ•°è°ƒç”¨æœåŠ¡ä¸­æä¾›çš„èƒ½åŠ›ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Controller, Get, Post, Body, Param } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { OrdersService } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./orders.service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { CreateOrderDto } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./dto/create-order.dto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> ordersService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersService</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">createOrderDto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CreateOrderDto</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(createOrderDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;:id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ PSï¼š</p><p>é™¤æ„é€ å‡½æ•°æ³¨å…¥çš„è¿™ç§æ–¹å¼å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å±æ€§æ³¨å…¥ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Inject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">private readonly </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ordersService</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: OrdersService;</span></span></code></pre></div><h2 id="ä¸­é—´ä»¶çš„ä½¿ç”¨" tabindex="-1">ä¸­é—´ä»¶çš„ä½¿ç”¨ <a class="header-anchor" href="#ä¸­é—´ä»¶çš„ä½¿ç”¨" aria-label="Permalink to &quot;ä¸­é—´ä»¶çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>ä¸­é—´ä»¶æ˜¯è·¯ç”±å¤„ç†ç¨‹åºä¹‹å‰è¿è¡Œçš„å‡½æ•°ï¼Œåœ¨ä¸­é—´ä»¶ä¸­å¯ä»¥è®¿é—® request å’Œ response å¯¹è±¡ï¼Œä»¥åŠå°†æ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„<code>next()</code>å‡½æ•°ã€‚</p><h3 id="åˆ›å»ºä¸­é—´ä»¶" tabindex="-1">åˆ›å»ºä¸­é—´ä»¶ <a class="header-anchor" href="#åˆ›å»ºä¸­é—´ä»¶" aria-label="Permalink to &quot;åˆ›å»ºä¸­é—´ä»¶&quot;">â€‹</a></h3><ul><li>å®Œæ•´å‘½ä»¤ï¼š<code>nest generate middleware &lt;middleware-name&gt;</code></li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g mi &lt;middleware-name&gt;</code></li></ul><p>ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªä½¿ç”¨<code>@Injectable()</code>è£…é¥°å™¨æ³¨é‡Šä¸”å®ç°<strong>NestMiddleware</strong>æ¥å£çš„ç±»ï¼Œ</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Injectable, NestMiddleware } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Request, Response } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;express&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> LoggerMiddleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestMiddleware</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  use</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> start</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">hrtime</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;finish&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> diff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">hrtime</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(start);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (diff[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1e3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> diff[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1e-6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toFixed</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">req</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">method</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">req</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} - ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">time</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}ms`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    });</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">    next</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ PSï¼šå¯¹äºæ²¡æœ‰å±æ€§ã€æ²¡æœ‰é¢å¤–çš„å‡½æ•°ä¹Ÿæ²¡æœ‰é¢å¤–çš„ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ™®é€šçš„å‡½æ•°æ¥è¡¨ç¤ºä¸­é—´ä»¶ï¼Œè¿™ç±»ä¸­é—´ä»¶æˆä¸º<strong>åŠŸèƒ½ç±»ä¸­é—´ä»¶</strong>ã€‚</p><h3 id="æ³¨å†Œä¸­é—´ä»¶" tabindex="-1">æ³¨å†Œä¸­é—´ä»¶ <a class="header-anchor" href="#æ³¨å†Œä¸­é—´ä»¶" aria-label="Permalink to &quot;æ³¨å†Œä¸­é—´ä»¶&quot;">â€‹</a></h3><p>ä¸­é—´ä»¶çš„æ³¨å†Œäºæ§åˆ¶å™¨å’Œæä¾›è€…çš„æ³¨å†Œæ–¹å¼ä¸åŒï¼Œéœ€è¦åœ¨æ¶ˆè´¹ä¸­é—´ä»¶çš„æ¨¡å—é€šè¿‡ç»§æ‰¿ <strong>NestModule</strong> å¹¶å®ç° <code>configure</code> æ¥å£ï¼Œå¦‚ä¸‹é¢æˆ‘ä»¬åœ¨è®¢å•æ¨¡å—ä¸­æ³¨å†Œäº†è¿™ä¸ª <strong>Logger</strong> ä¸­é—´ä»¶ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { MiddlewareConsumer, Module, NestModule } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { OrdersService } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./orders.service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { OrdersController } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./orders.controller&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { LoggerMiddleware } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;src/logger/logger.middleware&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  controllers: [OrdersController],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  providers: [OrdersService],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  configure</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> MiddlewareConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(LoggerMiddleware).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ PSï¼š<code>forRoutes()</code>æ”¯æŒå¤šç§å½¢å¼çš„å‚æ•°æ¥è¡¨ç¤ºç”Ÿæ•ˆçš„èŒƒå›´ï¼Œå¦‚ï¼šå•å­—ç¬¦ä¸²ã€å¤šä¸ªå­—ç¬¦ä¸²ã€RouteInfo å¯¹è±¡ã€å•ä¸ªæ§åˆ¶å™¨ç±»æˆ–å¤šä¸ªæ§åˆ¶å™¨ç±»ã€‚</p><h3 id="èŒƒå›´æ§åˆ¶" tabindex="-1">èŒƒå›´æ§åˆ¶ <a class="header-anchor" href="#èŒƒå›´æ§åˆ¶" aria-label="Permalink to &quot;èŒƒå›´æ§åˆ¶&quot;">â€‹</a></h3><p><strong>MiddlewareConsumer</strong> æä¾›äº†<code>exclude</code>å‡½æ•°æ¥æŒ‰è§„åˆ™æ’é™¤ä¸€äº›ä¸åº”ç”¨ä¸­é—´ä»¶çš„è·¯ç”±ï¼Œå…·ä½“çš„è§„åˆ™å¯è§ <a href="https://github.com/pillarjs/path-to-regexp#parameters" target="_blank" rel="noreferrer">path-to-regexp</a>ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// åŸºäºå…·ä½“è·¯ç”±é…ç½®åŠæ¨¡å¼åŒ¹é…çš„æ’é™¤æ–¹æ¡ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">consumer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(LoggerMiddleware)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">exclude</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    { path: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, method: RequestMethod.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    { path: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, method: RequestMethod.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">POST</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    &quot;orders/(.*)&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><p><strong>MiddlewareConsumer</strong> æä¾›çš„ <code>forRoutes</code>æ”¯æŒä¸‹é¢è¿™ç§æ¨¡å¼åŒ¹é…çš„æ–¹å¼ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({ path: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;ab*cd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, method: RequestMethod.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">ALL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> });</span></span></code></pre></div><h3 id="ä¸­é—´ä»¶ä¸²è”" tabindex="-1">ä¸­é—´ä»¶ä¸²è” <a class="header-anchor" href="#ä¸­é—´ä»¶ä¸²è”" aria-label="Permalink to &quot;ä¸­é—´ä»¶ä¸²è”&quot;">â€‹</a></h3><p>å½“ä¸€ä¸ªä¸­é—´ä»¶å¤„ç†å®Œæˆåï¼Œå¦‚æœè¯·æ±‚è¿˜æ²¡æœ‰ç»“æŸå°†æœ‰<code>next()</code>å‡½æ•°å°†æ§åˆ¶æƒå‘ä¸‹ä¼ é€’ã€‚å¦‚ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼šä¸ºäº†å…è®¸å®¢æˆ·ç«¯å‘èµ·è·¨åŸŸè®¿é—®ï¼Œåœ¨ <strong>Cors</strong> ä¸­é—´ä»¶ä¸­ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚æ·»åŠ ç‰¹æ®Šçš„è¯·æ±‚å¤´åå†äº¤ç”± <strong>Logger</strong> ä¸­é—´ä»¶ç»§ç»­æ‰§è¡Œã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Injectable, NestMiddleware } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Request, Response } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;express&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CorsMiddleware</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestMiddleware</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  use</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Access-Control-Allow-Origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å…è®¸æ‰€æœ‰æ¥æº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Access-Control-Allow-Headers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Content-Type,Authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å…è®¸æŒ‡å®šçš„è¯·æ±‚å¤´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;Access-Control-Allow-Methods&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &quot;GET, POST, PUT, DELETE, OPTIONS&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ); </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å…è®¸æŒ‡å®šçš„è¯·æ±‚æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">    next</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  configure</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> MiddlewareConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(CorsMiddleware, LoggerMiddleware).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="å…¨å±€ä¸­é—´ä»¶" tabindex="-1">å…¨å±€ä¸­é—´ä»¶ <a class="header-anchor" href="#å…¨å±€ä¸­é—´ä»¶" aria-label="Permalink to &quot;å…¨å±€ä¸­é—´ä»¶&quot;">â€‹</a></h3><p>å…¨å±€æ³¨å†Œ <strong>ç±»ä¸­é—´ä»¶</strong>ï¼Œå¯ä»¥åœ¨æ ¹æ¨¡å— <strong>AppModule</strong> ä¸­æ³¨å†Œï¼Œä½¿ç”¨é€šé…ç¬¦çš„å½¢å¼è¡¨ç¤º <code>forRoutes(&#39;*&#39;)</code>ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> AppModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  configure</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">consumer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> MiddlewareConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    consumer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(CorsMiddleware, LoggerMiddleware).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>å¦‚æœéœ€è¦å…¨å±€æ³¨å†Œ <strong>åŠŸèƒ½ç±»ä¸­é—´ä»¶</strong> ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨åˆ›å»º <strong>app</strong> å®ä¾‹åï¼Œé€šè¿‡ <code>app.use(&#39;&#39;)</code> å‡½æ•°æ³¨å†Œï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(AppModule);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(logger);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><h2 id="å®ˆå«çš„ä½¿ç”¨" tabindex="-1">å®ˆå«çš„ä½¿ç”¨ <a class="header-anchor" href="#å®ˆå«çš„ä½¿ç”¨" aria-label="Permalink to &quot;å®ˆå«çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>å®ˆå«ä¾æ®æœåŠ¡è¿è¡ŒæœŸé—´çš„æƒé™ã€è§’è‰²åŠè®¿é—®æ§åˆ¶åˆ—è¡¨ç­‰æ¡ä»¶æ¥ç¡®å®šå®¢æˆ·ç«¯çš„è®¿é—®æ˜¯å¦äº¤ç”±è·¯ç”±å¤„ç†ç¨‹åºå¤„ç†ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„ä¸­é—´ä»¶å……å½“å®ˆå«çš„è§’è‰²è€Œè¨€ ï¼ŒNestJS æä¾›çš„å®ˆå«æ”¯æŒè®¿é—®<code>ExecutionContext</code> ****å®ä¾‹ï¼Œå› æ­¤å¯ä»¥æ˜ç¡®çŸ¥é“æ¥ç€è¦æ‰§è¡Œä»€ä¹ˆã€‚</p><h3 id="åˆ›å»ºå®ˆå«" tabindex="-1">åˆ›å»ºå®ˆå« <a class="header-anchor" href="#åˆ›å»ºå®ˆå«" aria-label="Permalink to &quot;åˆ›å»ºå®ˆå«&quot;">â€‹</a></h3><ul><li>å®Œæ•´å‘½ä»¤ï¼š<code>nest generate guard &lt;guard-name&gt;</code></li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g gu &lt;guard-name&gt;</code></li></ul><p>å®ˆå«ä¹Ÿæ˜¯ä¸€ä¸ªä½¿ç”¨<code>@Injectable()</code>è£…é¥°å™¨æ³¨é‡Šçš„ç±»ï¼Œå®ƒéœ€è¦å®ç° <code>CanActivate</code> æ¥å£ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { CanActivate, ExecutionContext, Injectable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;rxjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> RolesGuard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> CanActivate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  canActivate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> boolean</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="åŸºäºè§’è‰²å®ˆå«" tabindex="-1">åŸºäºè§’è‰²å®ˆå« <a class="header-anchor" href="#åŸºäºè§’è‰²å®ˆå«" aria-label="Permalink to &quot;åŸºäºè§’è‰²å®ˆå«&quot;">â€‹</a></h3><p>é¦–å…ˆè¦ä½¿ç”¨<code>Reflector</code>åˆ›å»ºä¸€ä¸ªç”¨æ¥åˆ†é…è§’è‰²çš„è£…é¥°å™¨ï¼Œç„¶ååœ¨å¯¹åº”çš„è·¯ç”±å¤„ç†å‡½æ•°ä¸Šæ·»åŠ è¿™ä¸ªè£…é¥°å™¨å¹¶åˆ†é…æƒé™ï¼›</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Reflector } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> Roles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Reflector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createDecorator</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[]&gt;();</span></span></code></pre></div><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Roles</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;admin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() createOrderDto: CreateOrderDto) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(createOrderDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>æ¥ç€åœ¨<code>RolesGuard</code> ä¸­é€šè¿‡ <strong>æ‰§è¡Œä¸Šä¸‹æ–‡ç±»</strong> è·å–è¢«è°ƒç”¨å¤„ç†å‡½æ•°çš„å¼•ç”¨ï¼Œå¹¶æ³¨å…¥<code>Reflector</code>æ¥æå–å¤„ç†å‡½æ•°è¢«åˆ†é…çš„è§’è‰²ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { CanActivate, ExecutionContext, Injectable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Reflector } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;rxjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Roles } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;./roles.decorator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> RolesGuard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> CanActivate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> reflector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Reflector</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  canActivate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">    context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> boolean</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> handler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> roles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.reflector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[]&gt;(Roles, handler);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(roles); </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// output [&#39;admin&#39;]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ç°åœ¨å‡è®¾ä¸å®¢æˆ·ç«¯åå•†é€šè¿‡ <strong>Header</strong> ä¸­æ·»åŠ  <code>role</code> å±æ€§æ¥ä¼ é€’è§’è‰²ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨<code>RolesGuard</code>ä¸­å¯ä»¥é€šè¿‡æ‰§è¡Œä¸Šä¸‹æ–‡è·å– <strong>Request</strong> å¯¹è±¡ä¸­çš„è¯·æ±‚å¤´æ•°æ®ï¼Œæœ€åå¯¹æ¯”è§’è‰²åˆ—è¡¨ï¼Œå¹¶è¿”å›æ˜¯å¦åŒ…å«è§’è‰²çš„ç»“æœï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>import { CanActivate, ExecutionContext, Injectable } from &#39;@nestjs/common&#39;;</span></span>
<span class="line"><span>import { Reflector } from &#39;@nestjs/core&#39;;</span></span>
<span class="line"><span>import { Observable } from &#39;rxjs&#39;;</span></span>
<span class="line"><span>import { Roles } from &#39;./roles.decorator&#39;;</span></span>
<span class="line"><span>import { Request } from &#39;express&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@Injectable()</span></span>
<span class="line"><span>export class RolesGuard implements CanActivate {</span></span>
<span class="line"><span>  constructor(private readonly reflector: Reflector) {}</span></span>
<span class="line"><span>  canActivate(</span></span>
<span class="line"><span>    context: ExecutionContext,</span></span>
<span class="line"><span>  ): boolean | Promise&lt;boolean&gt; | Observable&lt;boolean&gt; {</span></span>
<span class="line"><span>    const handler = context.getHandler();</span></span>
<span class="line"><span>    const roles = this.reflector.get&lt;string[]&gt;(Roles, handler);</span></span>
<span class="line"><span>    const request: Request = context.switchToHttp().getRequest();</span></span>
<span class="line"><span>    const role = request.headers[&#39;role&#39;] || &#39;&#39;;</span></span>
<span class="line"><span>    return roles.includes(role as string);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h3 id="ç»‘å®šå®ˆå«" tabindex="-1">ç»‘å®šå®ˆå« <a class="header-anchor" href="#ç»‘å®šå®ˆå«" aria-label="Permalink to &quot;ç»‘å®šå®ˆå«&quot;">â€‹</a></h3><p>æ§åˆ¶å™¨èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseGuards</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(RolesGuard)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Controller</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;orders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseGuards</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> RolesGuard</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><p>å…¨å±€èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(AppModule);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">useGlobalGuards</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> RolesGuard</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  providers: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">APP_GUARD</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      useClass: RolesGuard,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><h2 id="æ‹¦æˆªå™¨çš„ä½¿ç”¨" tabindex="-1">æ‹¦æˆªå™¨çš„ä½¿ç”¨ <a class="header-anchor" href="#æ‹¦æˆªå™¨çš„ä½¿ç”¨" aria-label="Permalink to &quot;æ‹¦æˆªå™¨çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>æ‹¦æˆªå™¨æ˜¯åº”ç”¨ AOP åˆ‡é¢ç¼–ç¨‹æ¨¡å¼æ¥å¯¹è·¯ç”±å¤„ç†å‡½æ•°è¿›è¡ŒåŠŸèƒ½æ‰©å±•çš„æŠ€æœ¯ï¼Œé€šè¿‡æ‹¦æˆªå™¨å¯ä»¥æ‰©å±•ä¸‹é¢è¿™äº›èƒ½åŠ›ï¼š</p><ul><li>åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰/ä¹‹åç»‘å®šé¢å¤–çš„é€»è¾‘</li><li>è½¬æ¢å‡½æ•°è¿”å›çš„ç»“æœ</li><li>è½¬æ¢å‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸</li><li>æ‰©å±•åŸºæœ¬åŠŸèƒ½è¡Œä¸º</li><li>æ ¹æ®ç‰¹å®šæ¡ä»¶å®Œå…¨è¦†ç›–å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œç¼“å­˜ï¼‰</li></ul><h3 id="åˆ›å»ºæ‹¦æˆªå™¨" tabindex="-1">åˆ›å»ºæ‹¦æˆªå™¨ <a class="header-anchor" href="#åˆ›å»ºæ‹¦æˆªå™¨" aria-label="Permalink to &quot;åˆ›å»ºæ‹¦æˆªå™¨&quot;">â€‹</a></h3><ul><li>å®Œæ•´å‘½ä»¤ï¼š<code>nest generate interceptor &lt;interceptor-name&gt;</code></li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g itc &lt;interceptor-name&gt;</code></li></ul><p>æ‹¦æˆªå™¨ä¹Ÿæ˜¯ä¸€ä¸ªä½¿ç”¨<code>@Injectable()</code>è£…é¥°å™¨æ³¨é‡Šçš„ç±»ï¼Œå®ƒéœ€è¦å®ç° <code>NestInterceptor</code> æ¥å£ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  CallHandler,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ExecutionContext,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Injectable,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  NestInterceptor,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Observable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;rxjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> TimerInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CallHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> next.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="è®°å½•æ‰§è¡Œæ—¶é—´" tabindex="-1">è®°å½•æ‰§è¡Œæ—¶é—´ <a class="header-anchor" href="#è®°å½•æ‰§è¡Œæ—¶é—´" aria-label="Permalink to &quot;è®°å½•æ‰§è¡Œæ—¶é—´&quot;">â€‹</a></h3><p>å½“å®¢æˆ·ç«¯çš„è¯·æ±‚è§¦å‘åˆ° <strong>TimerInterceptor</strong> æ‹¦æˆªå™¨æ—¶ï¼Œå°†è·å–åˆ°è¯·æ±‚å¯¹è±¡å®ä¾‹ï¼Œå¹¶è®°å½•ä¸‹äº†è¯·æ±‚è¿›å…¥çš„æ—¶é—´ç‚¹ï¼›</p><p>å½“ <code>next.handle()</code> å‡½æ•°è¿”å›ç»“æœåè¡¨ç¤ºå¯¹åº”çš„è·¯ç”±å¤„ç†å‡½æ•°å·²ç»æ‰§è¡Œå®Œæˆã€‚é€šè¿‡è¿”å›çš„ <strong>Observable</strong> å¯¹è±¡ï¼Œå¯ä»¥åœ¨å…¶ç®¡é“ä¸­ä½¿ç”¨ <code>tap</code> æ“ä½œç¬¦è®°å½•ç»“æŸæ—¶é—´å¹¶æ‰“å°æ‰§è¡Œæ—¶é•¿ä¿¡æ¯ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  CallHandler,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ExecutionContext,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Injectable,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  NestInterceptor,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { Observable, tap } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;rxjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> TimerInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CallHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">switchToHttp</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> start</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">hrtime</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> next.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      tap</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> diff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">hrtime</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(start);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (diff[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1e3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> diff[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1e-6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toFixed</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">req</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">method</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">req</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">} - ${</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">time</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}ms`</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="ç»‘å®šæ‹¦æˆªå™¨" tabindex="-1">ç»‘å®šæ‹¦æˆªå™¨ <a class="header-anchor" href="#ç»‘å®šæ‹¦æˆªå™¨" aria-label="Permalink to &quot;ç»‘å®šæ‹¦æˆªå™¨&quot;">â€‹</a></h3><p>æ§åˆ¶å™¨èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseInterceptors</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(TimerInterceptor)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseInterceptors</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> TimerInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><p>å…¨å±€èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(AppModule);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">useGlobalInterceptors</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> TimerInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  providers: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">APP_INTERCEPTOR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      useClass: TimerInterceptor,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><h3 id="æ›´å¤šåº”ç”¨æ¡ˆä¾‹" tabindex="-1">æ›´å¤šåº”ç”¨æ¡ˆä¾‹ <a class="header-anchor" href="#æ›´å¤šåº”ç”¨æ¡ˆä¾‹" aria-label="Permalink to &quot;æ›´å¤šåº”ç”¨æ¡ˆä¾‹&quot;">â€‹</a></h3><ol><li>å“åº”æ˜ å°„ï¼šä½¿ç”¨<strong>Rxjs</strong>æä¾›çš„<code>map</code>æ“ä½œç¬¦å¯¹å¤„ç†å‡½æ•°è¿”å›çš„æ•°æ®åšäºŒæ¬¡åŠ å·¥ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> TransformInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CallHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> next.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      map</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          time: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">          data,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ol><li>å¼‚å¸¸æ˜ å°„ï¼šä½¿ç”¨<strong>Rxjs</strong>æä¾›çš„<code>catchError</code>æ“ä½œç¬¦æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ErrorsInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CallHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> next</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">catchError</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> throwError</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> BadGatewayException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ol><li>å¤„ç†å‡½æ•°è¶…æ—¶ï¼šä½¿ç”¨<strong>Rxjs</strong>æä¾›çš„<code>timeout</code>å’Œ<code>catchError</code>å…±åŒå®ç°å¤„ç†å‡½æ•°è¶…æ—¶ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> TimeoutInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> NestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ExecutionContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CallHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> Observable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> next.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      catchError</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> TimeoutError</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">          return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> throwError</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> RequestTimeoutException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> throwError</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h2 id="å¼‚å¸¸è¿‡æ»¤å™¨çš„ä½¿ç”¨" tabindex="-1">å¼‚å¸¸è¿‡æ»¤å™¨çš„ä½¿ç”¨ <a class="header-anchor" href="#å¼‚å¸¸è¿‡æ»¤å™¨çš„ä½¿ç”¨" aria-label="Permalink to &quot;å¼‚å¸¸è¿‡æ»¤å™¨çš„ä½¿ç”¨&quot;">â€‹</a></h2><p><strong>NestJS</strong> å†…ç½®çš„ <strong>å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨</strong> è´Ÿè´£å¤„ç†åº”ç”¨ä¸­æ‰€æœ‰æœªå¤„ç†çš„ <strong>HttpException</strong> åŠå…¶å­ç±»çš„å¼‚å¸¸ï¼Œå…¶ä»–å¼‚å¸¸å°†ç”±å†…ç½®è¿‡æ»¤å™¨ç”Ÿæˆé»˜è®¤çš„ JSON å“åº”ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;statusCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Internal server error&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="æ ‡å‡†å¼‚å¸¸" tabindex="-1">æ ‡å‡†å¼‚å¸¸ <a class="header-anchor" href="#æ ‡å‡†å¼‚å¸¸" aria-label="Permalink to &quot;æ ‡å‡†å¼‚å¸¸&quot;">â€‹</a></h3><p>é€šè¿‡å®ä¾‹åŒ– <strong>NestJs</strong> å†…ç½®çš„ <code>HttpException</code> ç±»æ¥æŠ›å‡ºçš„å¼‚å¸¸ä¸ºæ ‡å‡†å¼‚å¸¸ï¼Œä¸‹é¢çš„ä»£ç å±•ç¤ºäº†ç”± <code>message</code> å’Œ <code>statusCode</code> ç»„æˆçš„æ ‡å‡†ç¤ºä¾‹ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> HttpException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;Forbidden&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FORBIDDEN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ä¸‹é¢çš„ä»£ç å®Œå…¨è‡ªå®šä¹‰äº†æŠ›å‡ºå¼‚å¸¸çš„ <strong>JSON</strong> å“åº”ä½“ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // TODO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> HttpException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        status: HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FORBIDDEN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        error: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;This is a custom message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FORBIDDEN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        cause: error,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">403</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;This is a custom message&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="è‡ªå®šä¹‰å¼‚å¸¸" tabindex="-1">è‡ªå®šä¹‰å¼‚å¸¸ <a class="header-anchor" href="#è‡ªå®šä¹‰å¼‚å¸¸" aria-label="Permalink to &quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;">â€‹</a></h3><p>ç»§æ‰¿ <code>HttpException</code> ç±»å¯ä»¥å°è£…ç¬¦åˆè‡ªå·±é¡¹ç›®çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼Œæ­£å¦‚ä¸Šé¢å®Œå…¨è‡ªå®šä¹‰æŠ›å‡ºå¼‚å¸¸ <strong>JSON</strong> å“åº”ä½“çš„ä»£ç ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { HttpException, HttpStatus } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ForbiddenException</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> HttpException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        status: HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FORBIDDEN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        error: message,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">FORBIDDEN</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        cause: error,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>åœ¨ <code>findAll</code> å‡½æ•°å°†æŠ›å‡ºæ ‡å‡†å¼‚å¸¸æ”¹ä¸ºè‡ªå®šä¹‰çš„ <code>ForbiddenException</code> å¼‚å¸¸ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ForbiddenException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;This is a custom message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="å†…ç½®-http-å¼‚å¸¸" tabindex="-1">å†…ç½® HTTP å¼‚å¸¸ <a class="header-anchor" href="#å†…ç½®-http-å¼‚å¸¸" aria-label="Permalink to &quot;å†…ç½® HTTP å¼‚å¸¸&quot;">â€‹</a></h3><p>ä¸‹é¢è¿™äº›æ˜¯ <strong>NestJS</strong> å†…ç½®çš„ <strong>HTTP</strong> å¼‚å¸¸ç±»ï¼Œå®ƒä»¬ä¸ä¸Šé¢è‡ªå®šä¹‰å¼‚å¸¸ä¸€æ ·éƒ½æ˜¯ç»§æ‰¿è‡ª<strong>HttpException</strong>ã€‚</p><ul><li><code>BadRequestException</code></li><li><code>UnauthorizedException</code></li><li><code>NotFoundException</code></li><li><code>ForbiddenException</code></li><li><code>NotAcceptableException</code></li><li><code>RequestTimeoutException</code></li><li><code>ConflictException</code></li><li><code>GoneException</code></li><li><code>HttpVersionNotSupportedException</code></li><li><code>PayloadTooLargeException</code></li><li><code>UnsupportedMediaTypeException</code></li><li><code>UnprocessableEntityException</code></li><li><code>InternalServerErrorException</code></li><li><code>NotImplementedException</code></li><li><code>ImATeapotException</code></li><li><code>MethodNotAllowedException</code></li><li><code>BadGatewayException</code></li><li><code>ServiceUnavailableException</code></li><li><code>GatewayTimeoutException</code></li><li><code>PreconditionFailedException</code></li></ul><h3 id="åˆ›å»º-http-å¼‚å¸¸è¿‡æ»¤å™¨" tabindex="-1">åˆ›å»º HTTP å¼‚å¸¸è¿‡æ»¤å™¨ <a class="header-anchor" href="#åˆ›å»º-http-å¼‚å¸¸è¿‡æ»¤å™¨" aria-label="Permalink to &quot;åˆ›å»º HTTP å¼‚å¸¸è¿‡æ»¤å™¨&quot;">â€‹</a></h3><p>åˆ›å»ºå¼‚å¸¸è¿‡æ»¤å™¨æ¥æ¥ç®¡å†…ç½®çš„ <strong>å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨</strong> å®ç°ä½¿ç”¨ä¸åŒé¡¹ç›®çš„å¼‚å¸¸æ•è·å¤„ç†ï¼Œå¦‚å¢åŠ å¼‚å¸¸çš„æ—¥å¿—è®°å½•æˆ–æ”¹å˜ <strong>JSON</strong> æ¨¡å¼ã€‚</p><ol><li>åˆ›å»ºè¿‡æ»¤å™¨ï¼š <ul><li>å…¨å±€å‘½ä»¤ï¼š<code>nest generate filter &lt;filter-name&gt;</code></li><li>ç®€å†™å‘½ä»¤ï¼š<code>nest g f &lt;filter-name&gt;</code></li></ul></li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { ArgumentsHost, Catch, ExceptionFilter } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> ExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ArgumentsHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ol><li>é€šè¿‡<code>@Catch()</code> æŒ‡å®šé»˜è®¤åˆ›å»ºçš„è¿‡æ»¤å™¨ä¸ºæŒ‡å®šçš„ <code>HttpException</code> è¿‡æ»¤å™¨ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ArgumentsHost,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Catch,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ExceptionFilter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  HttpException,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(HttpException)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpExceptionFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> ExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ArgumentsHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(exception, host);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>é€šè¿‡æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡(<code>host</code>)ä¸­çš„ <strong>request</strong> è·å–å½“å‰è¯·æ±‚çš„åœ°å€ï¼Œå¼‚å¸¸å¯¹è±¡(<code>exception</code>)è·å–å½“å‰å¼‚å¸¸çŠ¶æ€ç ï¼Œå¹¶æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡(<code>host</code>)ä¸­é‡æ„ <strong>response</strong> å“åº”æ ¼å¼ï¼Œå®Œæˆå“åº”é‡æ„ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ArgumentsHost,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Catch,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ExceptionFilter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  HttpException,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(HttpException)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpExceptionFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> ExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ArgumentsHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> host.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">switchToHttp</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> exception.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(status).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      statusCode: status,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      timestamp: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      path: request.url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡Â  å°ç»“ï¼š</p><ol><li><code>exception</code> ä¸ºå½“å‰æ•è·åˆ°çš„å¼‚å¸¸å¯¹è±¡ï¼›</li><li><code>host</code> æ˜¯å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¯¹è±¡ï¼›</li></ol><h3 id="ç»‘å®šè¿‡æ»¤å™¨" tabindex="-1">ç»‘å®šè¿‡æ»¤å™¨ <a class="header-anchor" href="#ç»‘å®šè¿‡æ»¤å™¨" aria-label="Permalink to &quot;ç»‘å®šè¿‡æ»¤å™¨&quot;">â€‹</a></h3><p>è·¯ç”±æ‰§è¡Œå‡½æ•°èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> HttpExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ForbiddenException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;This is a custom message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(HttpExceptionFilter)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ForbiddenException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;This is a custom message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>æ§åˆ¶å™¨èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> HttpExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UseFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(HttpExceptionFilter)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> OrdersController</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><p>å…¨å±€èŒƒå›´ç»‘å®šï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(AppModule);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">useGlobalFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> HttpExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  providers: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">APP_FILTER</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      useClass: HttpExceptionFilter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><h3 id="åˆ›å»ºé€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨" tabindex="-1">åˆ›å»ºé€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨ <a class="header-anchor" href="#åˆ›å»ºé€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨" aria-label="Permalink to &quot;åˆ›å»ºé€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨&quot;">â€‹</a></h3><p>åœ¨åˆ›å»º <strong>HTTP</strong> å¼‚å¸¸è¿‡æ»¤å™¨çš„æ—¶å€™ä½¿ç”¨ <code>@Catch()</code> è£…é¥°å™¨ç»‘å®šäº†ç‰¹å®šçš„ <code>HttpException</code>ï¼Œæ¥ä¸‹æ¥å°±åˆ›å»ºä¸€ä¸ªè„±ç¦»ç‰¹å®šå¼‚å¸¸ç±»ä¸”ä¸å¹³å°æ— å…³çš„é€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨ã€‚</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// create commandï¼š`nest g f all-exceptions`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ArgumentsHost,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Catch,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ExceptionFilter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  HttpException,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  HttpStatus,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { HttpAdapterHost } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/core&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> AllExceptionsFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> ExceptionFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> httpAdapterHost</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpAdapterHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> unknown</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ArgumentsHost</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">httpAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.httpAdapterHost;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> host.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">switchToHttp</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> httpStatus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      exception </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> HttpException</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        ?</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> exception.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        :</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">INTERNAL_SERVER_ERROR</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> responseBody</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      statusCode: httpStatus,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      timestamp: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      path: httpAdapter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getRequestUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    httpAdapter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">reply</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(), responseBody, httpStatus);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ç»‘å®šé€šç”¨å¼‚å¸¸è¿‡æ»¤å™¨ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">httpAdapter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(HttpAdapterHost);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">useGlobalFilters</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> AllExceptionsFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(httpAdapter));</span></span></code></pre></div><h2 id="ç®¡é“çš„ä½¿ç”¨" tabindex="-1">ç®¡é“çš„ä½¿ç”¨ <a class="header-anchor" href="#ç®¡é“çš„ä½¿ç”¨" aria-label="Permalink to &quot;ç®¡é“çš„ä½¿ç”¨&quot;">â€‹</a></h2><p>ç®¡é“æœ‰ä¸¤ä¸ªå…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Œå…¶ä¸€æ˜¯è½¬æ¢(å°†è¾“å…¥æ•°æ®è½¬æ¢ä¸ºæ‰€éœ€è¦çš„å½¢å¼ï¼Œå¦‚ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—ç±»å‹)ï¼Œå…¶äºŒæ˜¯æ ¡éªŒ(æ ¡éªŒä¼ å…¥æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œæ— æ•ˆæ—¶å°†æŠ›å‡ºå¼‚å¸¸)æ•°æ®æ˜¯å¦æœ‰æ•ˆã€‚å› æ­¤ç®¡é“å°†è¿è¡Œåœ¨è·¯ç”±å¤„ç†å‡½æ•°çš„ <code>arguments</code> ä¸Šã€‚</p><h3 id="ç»‘å®šç®¡é“" tabindex="-1">ç»‘å®šç®¡é“ <a class="header-anchor" href="#ç»‘å®šç®¡é“" aria-label="Permalink to &quot;ç»‘å®šç®¡é“&quot;">â€‹</a></h3><p>NestJs æä¾›äº† 9 ä¸ªå¼€ç®±å³ç”¨çš„å†…ç½®ç®¡é“(<code>ValidationPipe</code>ï¼Œ<code>ParseIntPipe</code>ï¼Œ<code>ParseFloatPipe</code>ï¼Œ<code>ParseBoolPipe</code>ï¼Œ<code>ParseArrayPipe</code>ï¼Œ<code>ParseUUIDPipe</code>ï¼Œ<code>ParseEnumPipe</code>ï¼Œ<code>DefaultValuePipe</code>ï¼Œ<code>ParseFilePipe</code>)ï¼Œæ¥ç€å°±å°è¯•ç»‘å®š <code>ParseIntPipe</code> åˆ° <code>findOne</code> å¤„ç†å‡½æ•° å‡½æ•°ï¼Œè· <strong>number</strong> ç±»å‹ çš„ <code>id</code> å‚æ•°ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;:id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, ParseIntPipe) id: number) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> id); </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// number</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>å¦‚æœä¼ é€’çš„å‚æ•°æ— æ³•è½¬æ¢ä¸ºæ•°å­—åˆ™æŠ›å‡ºå¦‚ä¸‹çš„å¼‚å¸¸ï¼š</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;statusCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;2023-12-09T14:42:20.014Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#8DDB8C;">  &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;/orders/a&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>é€šè¿‡å®ä¾‹åŒ– <code>ParseIntPipe</code> å¯¹è±¡å®šä¹‰è½¬æ¢å¤±è´¥åçš„é”™è¯¯ç ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;:id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      &#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ParseIntPipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">        errorHttpStatusCode: HttpStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">NOT_ACCEPTABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    id: number,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> id); </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// number</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span></code></pre></div><h3 id="åŸºäº-schema-çš„éªŒè¯" tabindex="-1">åŸºäº schema çš„éªŒè¯ <a class="header-anchor" href="#åŸºäº-schema-çš„éªŒè¯" aria-label="Permalink to &quot;åŸºäº schema çš„éªŒè¯&quot;">â€‹</a></h3><p><strong>zod</strong> æ˜¯ç”¨æ¥å®šä¹‰ <strong>schema</strong> å’Œ è¿›è¡ŒéªŒè¯çš„æ¨¡å—ï¼ŒåŸºäºç®¡é“å¯ä»¥å¾ˆå¥½çš„æ—¶é—´è·¯ç”±å¤„ç†å‡½æ•°å‚æ•°çš„éªŒè¯ï¼š</p><ol><li>å®‰è£… <strong>zod</strong>ï¼š<code>npm install --save zod</code> ï¼›</li><li>åˆ›å»ºç®¡é“ï¼š<code>nest generate pipe zod-validation</code> or <code>nest g pi zod-validation</code>ï¼›</li><li>å®Œå–„ç®¡é“ï¼šåˆ©ç”¨æ³¨å…¥çš„<code>ZodObject</code> è§£æå‚æ•°æ•°æ®æ ¼å¼ï¼›</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ArgumentMetadata,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  BadRequestException,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Injectable,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  PipeTransform,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { ZodObject } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;zod&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ZodValidationPipe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> PipeTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">private</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;"> schema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ZodObject</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  transform</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">metadata</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ArgumentMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.schema.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> BadRequestException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Validation failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ol><li>å®šä¹‰ schemaï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { z } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;zod&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> createOrderSchema</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> z</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">object</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    orderId: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    orderNo: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    orderName: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    orderStatus: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    orderAmount: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    createTime: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    updateTime: z.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">required</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> CreateOrderDto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> z</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">infer</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> createOrderSchema&gt;;</span></span></code></pre></div><ol><li>ç»‘å®šç®¡é“ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">UsePipes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ZodValidationPipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(createOrderSchema))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">() createOrderDto: CreateOrderDto) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(createOrderDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><h3 id="åŸºäº-class-çš„éªŒè¯" tabindex="-1">åŸºäº class çš„éªŒè¯ <a class="header-anchor" href="#åŸºäº-class-çš„éªŒè¯" aria-label="Permalink to &quot;åŸºäº class çš„éªŒè¯&quot;">â€‹</a></h3><p>åœ¨ <strong>NestJS</strong> ä¸­å¯ä»¥ä½¿ç”¨ <strong>class-validator</strong> æ¨¡å—å®ç°åŸºäºç±»å’Œè£…é¥°å™¨çš„å½¢å¼è¿›è¡Œå‚æ•°éªŒè¯ã€‚</p><ol><li>å®‰è£… <strong>class-validator</strong>ï¼š<code>npm i --save class-validator class-transformer</code> ;</li><li>åˆ›å»ºç®¡é“ï¼š<code>nest generate pipe validation</code> or <code>nest g pi validation</code>ï¼›</li><li>å®Œå–„ç®¡é“ï¼šåˆ©ç”¨ <code>metatype</code> æä¾›çš„å‚æ•°å…ƒç±»å‹éªŒè¯å‚æ•°ï¼›</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ArgumentMetadata,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  BadRequestException,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  Injectable,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  PipeTransform,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;@nestjs/common&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { validate } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;class-validator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { plainToInstance } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &quot;class-transformer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ValidationPipe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;"> PipeTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> transform</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">metatype</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ArgumentMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">metatype </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> !</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toValidate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(metatype)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> plainToInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(metatype, value);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> errors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> validate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(object);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (errors.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> BadRequestException</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&quot;Validation failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> value;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> toValidate</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">metatype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [String, Number, Date];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">types.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(metatype);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><ol><li>é‡æ–°ç»‘å®šç®¡é“ï¼š</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ValidationPipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">()) createOrderDto: CreateOrderDto) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.ordersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(createOrderDto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>ğŸ’¡ å…¨å±€ç»‘å®šç®¡é“ï¼š</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> NestFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(AppModule);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">useGlobalPipes</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ValidationPipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">Module</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  providers: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">APP_PIPE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      useClass: ValidationPipe,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {}</span></span></code></pre></div><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>æœ¬ç¯‡æ–‡ç« ä»‹ç»äº† Nestjs çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬åˆ›å»ºé¡¹ç›®å’Œæ¨¡å—ï¼Œæ§åˆ¶å™¨ã€æœåŠ¡ã€æ¨¡å—ã€ä¸­é—´ä»¶ã€å¼‚å¸¸è¿‡æ»¤å™¨ã€ç®¡é“ã€å®ˆå«å’Œæ‹¦æˆªå™¨çš„ä½¿ç”¨ã€‚æ§åˆ¶å™¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒæœåŠ¡å°è£…å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¨¡å—ç®¡ç†æ‰€æœ‰æ§åˆ¶å™¨å’Œæä¾›è€…ï¼Œä¸­é—´ä»¶æ›´æ”¹è¯·æ±‚å“åº”å¯¹è±¡ï¼Œå¼‚å¸¸è¿‡æ»¤å™¨å¤„ç†æ‰€æœ‰æœªå¤„ç†çš„å¼‚å¸¸ï¼Œç®¡é“å¯¹å®¢æˆ·ç«¯æ•°æ®è¿›è¡Œè½¬æ¢å’ŒéªŒè¯ï¼Œå®ˆå«æ ¹æ®ç‰¹å®šçš„æƒé™è§’è‰²å†³å®šæ˜¯å¦è¿›è¡Œå¤„ç†ï¼Œæ‹¦æˆªå™¨å¯¹å¤„ç†å‡½æ•°è¿›è¡Œåˆ‡é¢ä¸Šçš„æ‰©å±•ã€‚</p></div></div></main><footer class="VPDocFooter" data-v-04776be3 data-v-12e13c5b><!--[--><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--]--><!----><nav class="prev-next" data-v-12e13c5b><div class="pager" data-v-12e13c5b><a class="VPLink link pager-link prev" href="/categories/backend/2023/10/22/%E5%89%8D%E7%AB%AF%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E6%96%B9%E6%A1%88%E6%8E%A2%E7%B4%A2" data-v-12e13c5b><!--[--><span class="desc" data-v-12e13c5b>ä¸Šä¸€ç¯‡</span><span class="title" data-v-12e13c5b><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>å‰ç«¯å³æ—¶é€šè®¯æ–¹æ¡ˆæ¢ç´¢</span><!--]--></a></div><div class="pager" data-v-12e13c5b><a class="VPLink link pager-link next" href="/categories/backend/2023/02/21/koa%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90" data-v-12e13c5b><!--[--><span class="desc" data-v-12e13c5b>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-12e13c5b><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>Koaæºç åˆ†æ&æ‰‹å†™Koa</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about_version.md\":\"ygGIw7DN\",\"categories_frontend_2022_10_23_javascriptä¸­çš„æ·±æµ…æ‹·è´.md\":\"1NoZYC7A\",\"archives.md\":\"2fc6mVnh\",\"notes_react_01-ä»é›¶å®ç°mini-react_02-ä»»åŠ¡è°ƒåº¦å™¨_fiberæ¶æ„.md\":\"VZDpKSDN\",\"notes_react_01-ä»é›¶å®ç°mini-react_03-ç»Ÿä¸€æäº¤_å®ç°function_component.md\":\"8xUJvfML\",\"notes_react_01-ä»é›¶å®ç°mini-react_04-vdomæ›´æ–°_update_children.md\":\"HsW1NQtG\",\"notes_react_01-ä»é›¶å®ç°mini-react_05-å®ç°usestate.md\":\"1rRR0SVP\",\"notes_react_01-ä»é›¶å®ç°mini-react_07-å®ç°todolistæ£€éªŒmini-react.md\":\"voo30XeE\",\"notes_rust_01-ruståŸºç¡€_01-rustå…¥é—¨åŸºç¡€.md\":\"nR6uSi7t\",\"notes_react_index.md\":\"qDFa6Y43\",\"notes_react_01-ä»é›¶å®ç°mini-react_06-å®ç°useeffect.md\":\"rsD4sBR-\",\"notes_rust_01-ruståŸºç¡€_02-rustè¿›é˜¶æ¦‚å¿µ.md\":\"j-lLDpBe\",\"notes_rust_01-ruståŸºç¡€_04-package_module.md\":\"Rvr06nc7\",\"notes_react_02-reactç§˜ç±_01-ç»„ä»¶å¸¸ç”¨hook_hooké—­åŒ…é™·é˜±.md\":\"lcs0kOQN\",\"notes_rust_index.md\":\"fCrES1Ik\",\"notes_vue3_01-vue3æºç è§£æ_02-vue3ç›®å½•ç»“æ„.md\":\"IkPYJ2cx\",\"notes_vue3_index.md\":\"SkLoLu9x\",\"projects_01-æ³°å°”å“ä¿¡_01-æ³°å°”å“ä¿¡å®˜ç½‘.md\":\"AE7mu5Ts\",\"projects_02-ç››ä¸–é›ªåŸ_01-ç‰¡ä¸¹æ±Ÿæµ·æµªé£æœºåœºå¹³å°.md\":\"iF4WHPl7\",\"notes_vue3_01-vue3æºç è§£æ_03-watchåŸç†.md\":\"DyMFmoTM\",\"notes_rust_01-ruståŸºç¡€_03-struct_æšä¸¾.md\":\"80ngP0GL\",\"projects_01-æ³°å°”å“ä¿¡_02-æ³°å°”å“ä¿¡ç»¼åˆç®¡ç†å¹³å°.md\":\"dk8V1IYY\",\"projects_03-è‡ªç ”å…¨æ ˆ_01-æ¸¸æˆç¤¾åŒº_01-æ¸¸æˆè®¨è®º_åˆ›ä½œç¤¾åŒº.md\":\"x04xAz6t\",\"projects_03-è‡ªç ”å…¨æ ˆ_sworddesign_01-é¡¹ç›®ä»‹ç».md\":\"-LV0F7vq\",\"projects_03-è‡ªç ”å…¨æ ˆ_sworddesign_02-å¼€å‘è®°å½•.md\":\"rAQZCmG0\",\"projects_01-æ³°å°”å“ä¿¡_03-å“ä¿¡_æµè§ˆå™¨è®¾å¤‡æŒ‡çº¹sdk.md\":\"ybPuENVJ\",\"projects_01-æ³°å°”å“ä¿¡_index.md\":\"54hTX2vh\",\"projects_04-ç‹¬ç«‹app_03-projectx_01-å¼€å‘è®°å½•.md\":\"eHQ_OtgB\",\"projects_03-è‡ªç ”å…¨æ ˆ_01-æ¸¸æˆç¤¾åŒº_02-æ¸¸æˆç¤¾åŒºapp.md\":\"kgNwFfou\",\"projects_05-å‚ä¸å¼€æº_01-ä»é›¶å®ç°mini_vue.md\":\"I1iW9k9l\",\"projects_04-ç‹¬ç«‹app_02-å¥½å¥½ç”Ÿæ´»_01-å¼€å‘è®°å½•.md\":\"SqDcRjf0\",\"notes_vue3_01-vue3æºç è§£æ_01-proxy.md\":\"DA2YEBYX\",\"projects_04-ç‹¬ç«‹app_04-åœ¨è·¯ä¸Š_01-å¼€å‘è®°å½•.md\":\"9OBSTxrD\",\"resume.md\":\"YwyQNln2\",\"about_me.md\":\"t6ur-dmc\",\"categories_frontend_index.md\":\"fkQ_mgLi\",\"categories_frontend_2024_02_15_viteå®ç°åŸç†ä¸ç®€å•å®ç°vite.md\":\"vCAvwEz_\",\"develop_editor_01-ä»é›¶å¼€å‘l0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨_01-å®ç°ç®€å•çš„å¯Œæ–‡æœ¬è¾“å…¥æ¡†.md\":\"iqlQSs0t\",\"categories_index.md\":\"TXhBztyX\",\"develop_editor_01-ä»é›¶å¼€å‘l0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨_02-ä»é›¶å®ç°ç®€å•çš„l0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨.md\":\"xndZ_F-E\",\"index.md\":\"y5xSbFcM\",\"develop_editor_index.md\":\"jJv_wn7z\",\"develop_index.md\":\"SnxPb09Y\",\"notes_react_01-ä»é›¶å®ç°mini-react_01-å®ç°æœ€ç®€mini-react.md\":\"zr1PYjvg\",\"categories_backend_2023_02_21_koaæºç åˆ†æ.md\":\"yA2wADAC\",\"categories_backend_2020_12_05_å…¬ä¼—å·å®šæ—¶å‘é€æ¨¡æ¿æ¶ˆæ¯çš„æŠ€æœ¯æ¢ç´¢.md\":\"ucuJgAEC\",\"notes_index.md\":\"z0G6UieO\",\"categories_backend_2023_07_17_ç”¨nestjsåˆ›å»ºé¡¹ç›®.md\":\"hpDVWHZH\",\"categories_frontend_2022_04_26_javascriptçš„åŸå‹ä¸åŸå‹é“¾.md\":\"WGRgNgLO\",\"categories_backend_2023_10_22_å‰ç«¯å³æ—¶é€šè®¯æ–¹æ¡ˆæ¢ç´¢.md\":\"iobkahEE\",\"categories_backend_index.md\":\"DMWSfvSQ\",\"projects_02-ç››ä¸–é›ªåŸ_02-ç‰¡ç–«æ§å¹³å°.md\":\"cCdQHJlh\",\"projects_05-å‚ä¸å¼€æº_02-ä»é›¶å®ç°mini_react.md\":\"10CY-7QJ\",\"categories_frontend_2023_05_12_æ‰‹å†™promise.md\":\"Jyq118pT\",\"projects_05-å‚ä¸å¼€æº_03-å‚ä¸earå¼€æº.md\":\"WFa8KWn1\",\"projects_index.md\":\"GbSIiqwC\",\"categories_frontend_2023_08_23_vuerouteråŸç†æŒ–æ˜æœº.md\":\"4S51xHxy\",\"tags.md\":\"T-bxw8s8\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"ä¹å¤©ã®çŸ¥è¯†ä»“åº“\",\"description\":\"ä¸ªäººæŠ€æœ¯çŸ¥è¯†åº“ï¼Œè®°å½• & åˆ†äº«ä¸ªäººç¢ç‰‡åŒ–ã€ç»“æ„åŒ–ã€ä½“ç³»åŒ–çš„æŠ€æœ¯çŸ¥è¯†å†…å®¹ã€‚\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"æ–‡ç« \",\"items\":[{\"text\":\"å‰ç«¯\",\"link\":\"/categories/frontend/index\",\"activeMatch\":\"/categories/frontend/\"},{\"text\":\"åç«¯\",\"link\":\"/categories/backend/index\",\"activeMatch\":\"/categories/backend/\"}],\"activeMatch\":\"/categories/\"},{\"text\":\"å¼€å‘æ—¥å¿—\",\"items\":[{\"text\":\"MDå¯Œæ–‡æœ¬ç¼–è¾‘å™¨\",\"link\":\"/develop/editor/index\",\"activeMatch\":\"/develop/editor\"}],\"activeMatch\":\"/develop/\"},{\"text\":\"å­¦ä¹ ç¬”è®°\",\"items\":[{\"text\":\"React\",\"link\":\"/notes/react/index\",\"activeMatch\":\"/notes/react\"},{\"text\":\"Rust\",\"link\":\"/notes/rust/index\",\"activeMatch\":\"/notes/rust\"},{\"text\":\"Vue3\",\"link\":\"/notes/vue3/index\",\"activeMatch\":\"/notes/vue3\"}],\"activeMatch\":\"/notes/\"},{\"text\":\"é¡¹ç›®ä¹‹æ—…\",\"link\":\"/projects/index\",\"activeMatch\":\"/projects\"},{\"text\":\"ç®€å†\",\"link\":\"/resume\",\"activeMatch\":\"/resume\"},{\"text\":\"å…³äº\",\"items\":[{\"text\":\"å…³äºæˆ‘\",\"link\":\"/about/me\",\"activeMatch\":\"/about/me\"},{\"text\":\"ç‰ˆæœ¬å†ç¨‹\",\"link\":\"/about/version\",\"activeMatch\":\"/about/version\"}],\"activeMatch\":\"/about/me\"}],\"sidebar\":{\"/categories/frontend/\":[{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/dragon.svg\\\" title=\\\"é¾™å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2024å¹´ (1ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Viteå®ç°åŸç†ä¸ç®€å•å®ç°\",\"link\":\"/categories/frontend/2024/02/15/Viteå®ç°åŸç†ä¸ç®€å•å®ç°Vite\"}],\"collapsed\":false},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/rabbit.svg\\\" title=\\\"å…”å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2023å¹´ (2ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>VueRouteråŸç†æŒ–æ˜æœº\",\"link\":\"/categories/frontend/2023/08/23/VueRouteråŸç†æŒ–æ˜æœº\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>æ‰‹å†™Promise\",\"link\":\"/categories/frontend/2023/05/12/æ‰‹å†™Promise\"}],\"collapsed\":true},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/tiger.svg\\\" title=\\\"è™å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2022å¹´ (2ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>JavaScriptä¸­çš„æ·±æµ…æ‹·è´\",\"link\":\"/categories/frontend/2022/10/23/JavaScriptä¸­çš„æ·±æµ…æ‹·è´\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>JavaScriptçš„åŸå‹ä¸åŸå‹é“¾\",\"link\":\"/categories/frontend/2022/04/26/JavaScriptçš„åŸå‹ä¸åŸå‹é“¾\"}],\"collapsed\":true}],\"/categories/backend/\":[{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/rabbit.svg\\\" title=\\\"å…”å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2023å¹´ (3ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å‰ç«¯å³æ—¶é€šè®¯æ–¹æ¡ˆæ¢ç´¢\",\"link\":\"/categories/backend/2023/10/22/å‰ç«¯å³æ—¶é€šè®¯æ–¹æ¡ˆæ¢ç´¢\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Nestjså¿«é€Ÿä¸Šæ‰‹\",\"link\":\"/categories/backend/2023/07/17/ç”¨Nestjsåˆ›å»ºé¡¹ç›®\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Koaæºç åˆ†æ&æ‰‹å†™Koa\",\"link\":\"/categories/backend/2023/02/21/koaæºç åˆ†æ\"}],\"collapsed\":false},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/rat.svg\\\" title=\\\"é¼ å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2020å¹´ (1ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å…¬ä¼—å·å®šæ—¶å‘é€æ¨¡æ¿æ¶ˆæ¯çš„æŠ€æœ¯æ¢ç´¢\",\"link\":\"/categories/backend/2020/12/05/å…¬ä¼—å·å®šæ—¶å‘é€æ¨¡æ¿æ¶ˆæ¯çš„æŠ€æœ¯æ¢ç´¢\"}],\"collapsed\":true}],\"/notes/rust/\":[{\"text\":\"RuståŸºç¡€ (4ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Rustå…¥é—¨åŸºç¡€\",\"link\":\"/notes/rust/01-RuståŸºç¡€/01-Rustå…¥é—¨åŸºç¡€\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Rustè¿›é˜¶æ¦‚å¿µ\",\"link\":\"/notes/rust/01-RuståŸºç¡€/02-Rustè¿›é˜¶æ¦‚å¿µ\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Struct&æšä¸¾\",\"link\":\"/notes/rust/01-RuståŸºç¡€/03-Struct&æšä¸¾\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>Package&Module\",\"link\":\"/notes/rust/01-RuståŸºç¡€/04-Package&Module\"}],\"collapsed\":false}],\"/notes/vue3/\":[{\"text\":\"Vue3æºç è§£æ (3ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>Vue3æºç è§£æ-Proxy\",\"link\":\"/notes/vue3/01-Vue3æºç è§£æ/01-Proxy\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>Vue3æºç è§£æ-ç›®å½•ç»“æ„\",\"link\":\"/notes/vue3/01-Vue3æºç è§£æ/02-Vue3ç›®å½•ç»“æ„\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>Vue3æºç è§£æ-watchåŸç†\",\"link\":\"/notes/vue3/01-Vue3æºç è§£æ/03-watchåŸç†\"}],\"collapsed\":false}],\"/notes/react/\":[{\"text\":\"ä»é›¶å®ç°mini-react (7ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å®ç°æœ€ç®€mini-react\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/01-å®ç°æœ€ç®€mini-react\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>ä»»åŠ¡è°ƒåº¦å™¨&fiberæ¶æ„\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/02-ä»»åŠ¡è°ƒåº¦å™¨&fiberæ¶æ„\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>ç»Ÿä¸€æäº¤&å®ç°function component\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/03-ç»Ÿä¸€æäº¤&å®ç°function_component\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>vdomæ›´æ–°&update children\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/04-vdomæ›´æ–°&update_children\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>å®ç°useState\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/05-å®ç°useState\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>å®ç°useEffect\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/06-å®ç°useEffect\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">7</div>å®ç°TodoListæ£€éªŒMiniReact\",\"link\":\"/notes/react/01-ä»é›¶å®ç°mini-react/07-å®ç°TodoListæ£€éªŒmini-react\"}],\"collapsed\":false},{\"text\":\"Reactç§˜ç± (1ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>ç»„ä»¶å¸¸ç”¨Hook&Hooké—­åŒ…é™·é˜±\",\"link\":\"/notes/react/02-Reactç§˜ç±/01-ç»„ä»¶å¸¸ç”¨Hook&Hooké—­åŒ…é™·é˜±\"}],\"collapsed\":true}],\"/develop/editor/\":[{\"text\":\"ä»é›¶å¼€å‘L0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ (2ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å®ç°ç®€å•çš„å¯Œæ–‡æœ¬è¾“å…¥æ¡†\",\"link\":\"/develop/editor/01-ä»é›¶å¼€å‘L0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨/01-å®ç°ç®€å•çš„å¯Œæ–‡æœ¬è¾“å…¥æ¡†\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>ä»é›¶å®ç°ç®€å•çš„L0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨\",\"link\":\"/develop/editor/01-ä»é›¶å¼€å‘L0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨/02-ä»é›¶å®ç°ç®€å•çš„L0çº§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨\"}],\"collapsed\":false}],\"/projects/\":[{\"text\":\"æ³°å°”å“ä¿¡\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å“ä¿¡ID&æ¨å¿…å®‰å®˜ç½‘\",\"link\":\"/projects/01-æ³°å°”å“ä¿¡/01-æ³°å°”å“ä¿¡å®˜ç½‘\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>æ³°å°”å“ä¿¡ç»¼åˆç®¡ç†å¹³å°\",\"link\":\"/projects/01-æ³°å°”å“ä¿¡/02-æ³°å°”å“ä¿¡ç»¼åˆç®¡ç†å¹³å°\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>å“ä¿¡&æµè§ˆå™¨è®¾å¤‡æŒ‡çº¹SDK\",\"link\":\"/projects/01-æ³°å°”å“ä¿¡/03-å“ä¿¡&æµè§ˆå™¨è®¾å¤‡æŒ‡çº¹SDK\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>undefined\",\"link\":\"/projects/01-æ³°å°”å“ä¿¡/index\"}],\"collapsed\":false},{\"text\":\"ç››ä¸–é›ªåŸ\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>ç‰¡ä¸¹æ±Ÿæµ·æµªé£æœºåœºç»¼åˆå¹³å°\",\"link\":\"/projects/02-ç››ä¸–é›ªåŸ/01-ç‰¡ä¸¹æ±Ÿæµ·æµªé£æœºåœºå¹³å°\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>ç‰¡ä¸¹æ±Ÿç–«æƒ…é˜²æ§ç®¡ç†å¹³å°\",\"link\":\"/projects/02-ç››ä¸–é›ªåŸ/02-ç‰¡ç–«æ§å¹³å°\"}],\"collapsed\":false},{\"text\":\"å‚ä¸å¼€æº\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>undefined\",\"link\":\"/projects/05-å‚ä¸å¼€æº/01-ä»é›¶å®ç°mini_vue\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>undefined\",\"link\":\"/projects/05-å‚ä¸å¼€æº/02-ä»é›¶å®ç°mini_react\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>undefined\",\"link\":\"/projects/05-å‚ä¸å¼€æº/03-å‚ä¸earå¼€æº\"}],\"collapsed\":false}]},\"logo\":\"/logo.png\",\"outline\":{\"level\":\"deep\",\"label\":\"ç›®å½•\"},\"darkModeSwitchLabel\":\"åˆ‡æ¢æ—¥å…‰/æš—é»‘æ¨¡å¼\",\"sidebarMenuLabel\":\"æ–‡ç« \",\"returnToTopLabel\":\"è¿”å›é¡¶éƒ¨\",\"lastUpdatedText\":\"æœ€åæ›´æ–°\",\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"editLink\":{\"pattern\":\"https://github.com/wty9sky/wty9sky.github.io/edit/main/docs/:path\",\"text\":\"ä¸å¦¥ä¹‹å¤„ï¼Œæ•¬è¯·é›…æ­£\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\"}}}}}}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/wty9sky/wty9sky.github.io\"}],\"articleMetadataConfig\":{\"author\":\"ä¹å¤©\",\"authorLink\":\"/about/me\",\"showViewCount\":false},\"copyrightConfig\":{\"license\":\"ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-SA 4.0)\",\"licenseLink\":\"http://creativecommons.org/licenses/by-sa/4.0/\"},\"commentConfig\":{\"type\":\"gitalk\",\"showComment\":false},\"footerConfig\":{\"showFooter\":true,\"icpRecordCode\":\"é»‘ICPå¤‡19007667å·-1\",\"copyright\":\"Copyright Â© 2019-2024 9sky\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>